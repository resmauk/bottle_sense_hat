<!DOCTYPE html>
<html>
<head>
	<title>Bottle Test</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
    <script>
        $(document).ready(function() {

            $("#rSlider").on( "slidestop", function() {
                getValues();
            });
            $("#gSlider").on( "slidestop", function() {
                getValues();
            });
            $("#bSlider").on( "slidestop", function() {
                getValues();
            });
            $("#ledSwitch").change(function() {
                getValues();
            });
        });

        function getValues() {
            var rValue = $('#rSlider').val();
            console.log('rValue = ' + rValue);
            var gValue = $('#gSlider').val();
            console.log('gValue = ' + gValue);
            var bValue = $('#bSlider').val();
            console.log('bValue = ' + bValue);
            var isChecked = $("#ledSwitch").is(":checked") ? 1:0;
            console.log('isChecked = ' + isChecked);

            $.ajax({
                url: '/action',
                type: 'POST',
                data: { rValue:rValue, gValue:gValue, bValue:bValue, buttonState:isChecked}
            });
        }

    </script>
</head>
<body>

<div data-role="page">

	<div data-role="header">
		<h1>Bottle Test</h1>
	</div><!-- /header -->

	<div data-role="main" class="ui-content">
                    <h>LED Controls</h>
                    <form>
                        <div>
                            <label for="ledButton">Power</label>
                            <input type="checkbox" name="ledSwitch" id="ledSwitch" data-role="flipswitch" />
                        </div>
                        <div>    
                            <label for="rSlider">Red Value</label>
                            <input type="range" name="rSlider" id="rSlider" min="1" max="255" value="255" />
                        </div>
                        <div>      
                            <label for="gSlider">Green Value</label>
                            <input type="range" name="gSlider" id="gSlider" min="1" max="255" value="255" />
                        </div>
                        <div>
                            <label for="bSlider">Blue Value</label>
                            <input type="range" name="bSlider" id="bSlider" min="1" max="255" value="255" />
                        </div>
                    </form>
        </div>
	<div data-role="footer">
		<h4>Copyright S6C</h4>
	</div><!-- /footer -->
</div><!-- /page -->

</body>
</html>
